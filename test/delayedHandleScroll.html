<!DOCTYPE html>
<html>
<head>
    <title>Simulate delay when callback returned,like it can be when asynchronous ajax request called from callback</title>
    <script type="text/javascript" src="../libs/jquery/jquery.js"></script>
    <script type="text/javascript" src="../src/jquery-ajax-scroll.js"></script>
</head>
<body>
<div id="largeData"></div>

<script type="text/javascript">
    $(document).ready(function(e){
        for(var i=0;i<50;i++){
            $('#largeData').append("<div>Test</div><br>");
        }
    });

    $(window).ajax_scroll({
        handleScroll:function (page) {
            setTimeout(function(){console.log("Page is:",page);$('#largeData').append("Appending data for page:" +  page +  "<div>DATA DATA DATA</div><br><div>DATA</div><br><div>DATA</div><br><div>DATA DATA DATA</div><br><div>DATA</div><br><div>DATA</div><br>");},2000);
            return true;
        },
        // Uncomment to enable infinite scroll
        //pagesToScroll : 5,
        step:'5%',
        loader:'<div class="loader"></div>',
        pagesToScroll: 120

    });

</script>
</body>
</html>